<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css">
<title>React の場合</title>
</head>
<body class="bg-dark bg-gradient text-light vh-100">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-1">
	<div class="container">
		<a class="navbar-brand" href="${ctx}">Servlet CRUD サンプル</a>
		<button class="navbar-toggler" type="button"
			data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item"><a class="nav-link" href="${ctx}/item/list">JSP</a></li>
				<li class="nav-item"><a class="nav-link active" href="${ctx}/spa/react.html">React</a></li>
				<li class="nav-item"><a class="nav-link" href="${ctx}/spa/vue.html">Vue</a></li>
			</ul>
			<div class="navbar-text d-flex ${empty request.remoteUser ? 'd-none' : ''}">
				<span class="me-3">${fn:escapeXml(request.remoteUser)}</span>
				<a class="nav-link active" href="${ctx}/logout">ログアウト</a>
			</div>
		</div>
	</div>
</nav>
<div class="container">
	<div class="alert mb-0" style="min-height:4rem" id="id_message"></div>
	<!-- ========== React Router 画面遷移部分 ========== -->
	<div id="_root"></div>
</div>

<footer class="footer fixed-bottom py-3 text-center bg-dark">
	<div class="container">
		<span class="text-muted">New Gradle Project Wizard (c) Pleiades MIT</span>
	</div>
</footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src='https://unpkg.com/react-router-dom@5/umd/react-router-dom.min.js'></script>
<!-- npm を使用せず CDN で JSX を使えるように babel を組み込み、.jsx を text/babel でロード -->
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script type="text/babel" src="react_detail.jsx"></script>
<script type="text/babel" src="react_list.jsx"></script>
<script>
// ES6 import と同じように書けるようにしておく
const { useState, useEffect } = React;
const { HashRouter, Route, Link, useParams, useHistory } = ReactRouterDOM; // v5 (v6 は script タグ未対応)

// axios 2xx 以外の共通エラー設定
axios.interceptors.response.use(
	response => response,
	error => {id_message.textContent = `❌ 処理できませんでした。 \${error.message} - \${error.config.url}`}
);
</script>
</html>
